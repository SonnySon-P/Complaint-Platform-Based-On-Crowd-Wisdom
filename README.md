# Complaint Platform Based On Crowd Wisdom

基於群眾智慧與加密技術，有效提升申訴案件品質。

## 壹、基本說明
**一、目標：**
在企業治理中，匿名申訴制度是揭露內部不當行為的重要機制。然而，現行制度面臨兩大挑戰：其一，惡意或虛假的申訴難以追溯，易造成資源浪費與名譽損害；其二，員工因擔憂身份外洩，往往選擇噤聲，影響制度實效。如何在保障匿名性的前提下，防範濫用與虛假申訴，成為當前亟待解決的關鍵課題。

**二、設計概念：**
本計畫旨在以此為核心，提出雙重設計目標：首先，透過盲簽章機制，確保申訴者為合法員工，並無需揭露其真實身份。同時，當申訴平台遭遇惡意濫用時，亦能通過集體決策機制公開申訴者身份；其次，引入群眾仲裁機制，對申訴事項進行初步篩選與核實，從而有效降低惡意濫用的風險，並提升整體申訴制度的可信度與可行性。為實現上述目標，本專案設計了多層次的協定機制，具體流程如下：
* 憑證發放：每月初，平台將生成包含多張「申訴憑證」的憑證池，這些憑證具一次性使用性並設有有效期限。生成後，憑證池將儲存於.txt文件中，並確保每位員工收到的內容相同（文件內容中，每位員工皆擁有一組專屬的私鑰片段，用於解密申訴員工的編號。）。接著，平台將利用員工的身份證字號對該文件進行AES加密處理，確保加密後的憑證池僅能由該員工進行解密使用。最終，所有加密後的憑證池將通過電子郵件發送給員工，有效防止企業通過申請頻率追蹤員工身份。
* 盲化憑證：通過這一步驟，員工將申訴內容進行盲化處理後，能夠透過申訴憑證獲取平台所賦予的盲化憑證，從而確認該申訴內容已獲得平台認證。當客戶端程式進行盲化憑證作業時，系統會要求申訴員工輸入員工編號以完成操作。該驗證程序僅在本機端執行，不會將任何申訴員工的身分資訊對外傳輸或外洩。
* 匿名申訴提交：最終，員工將使用盲簽憑證與申訴內容一同提交，平台能夠驗證申訴的合法性，但無法識別員工的具體身份。
* 仲裁委員隨機抽選：為確保抽選過程的公開與公正，平台將採用可驗證的隨機函數對全體員工進行隨機抽選，選出仲裁員，並通過電子郵件通知當選者，隨信附上「仲裁任務票據」。該票據將包含案件標號、申訴內容、投票須知、申訴使用的門檻簽章私鑰分片及能夠驗證抽籤過程的重要參數。
* 仲裁案件投票：仲裁員需憑「仲裁任務票據」憑證登入平台，對申訴內容進行投票，確認是否同意立案，並使用案件標號及門檻簽章私鑰分片完成簽署。門檻簽章的私鑰分片在創建後，會分別分發給各仲裁委員，伺服器端不會儲存完整私鑰或任何私鑰分片。於開票階段進行門檻簽章驗證時，系統將透過仲裁委員會成立時所加密的文件進行驗證，以確認是否能成功解密並據此判定投票結果的有效性。
* 開票：平台將彙整所有仲裁員提交的投票結果，以此作為仲裁委員會的集體決策。為避免外界推知實際參與仲裁的成員，本專案設計了「擴大抽選集合」機制。例如，平台可隨機抽選20名仲裁員，但僅要求其中至少過半數（如 10人）於期限內回覆即可。仲裁員透過私鑰分片進行簽署，以表達同意或反對。當同意票數達到三分之二門檻時，該申訴即視為正式通過。通過的申訴將進入立案程序，並交由專責委員會進行後續處理。若未達到最低參與人數門檻，則平台將重新進行仲裁員抽選，以確保程序的完整性與決策的正當性。
本計劃機制在保障匿名性的同時，透過隨機抽選與門檻簽章，確保仲裁決策具集體性，進而提升員工對匿名申訴制度的信任。
* 追朔惡意投訴者：當仲裁委員會認定投訴員工具有惡意意圖時，得提議由全體員工共同啟動該員工身份的解密程序。全公司員工可使用每月寄送之憑證信件內所附的私鑰片段參與門檻簽章作業。當同意人數達全體員工三分之二以上時，即可解鎖申訴內容中被加密的員工編號。

**三、開發環境：**
以下是開發客戶端與伺服器所採用的環境：
* 虛擬機：Docker
* 程式語言：Python
* RESTful API：Flask
* 資料庫：MongoDB
* 程式編輯器：Visual Studio Code

## 貳、操作說明
**一、安裝步驟：**
1. 建立容器：可使用Docker建立多個Linux容器，其中一個容器將作為伺服器，作為申訴平台；其餘容器則模擬多個客戶端，用以進行申訴者與仲裁委員的互動操作。
2. 安裝軟體：請於容器環境中預先安裝Python與MongoDB，以確保系統能順利運行。
3. 下載檔案：請於作為伺服器的容器中下載並部署Server檔案，其他作為客戶端節點的容器則下載Client檔案以進行模擬。
4. 使用相依套件：
* 伺服器
```bash
pip install Flask
pip install apscheduler
pip install cryptography
pip install pyzipper
pip install pymongo
pip install sympy
```
* 客戶端
```bash
pip install cryptography
pip install requests
```
5. 啟動系統
* 在伺服器容器中開啟伺服器程式
```shell
python server.py
```
* 客戶端節點的容器開啟程式
```shell
python client.py
```
> [!Warning]
> 請特別注意，在server.py與client.py程式中，請前往固定常數變數宣告的位置，修改為實際建立之容器的主機名稱（host）與連接埠（port），以確保程式能正確運行。值得一提的是，伺服器程式碼中的secret_sharing.py檔案，是參考GitHub上的[shea256/secret-sharing](https://github.com/shea256/secret-sharing/tree/master)專案進行修改與優化的，並非全部由本人撰寫。另一方面，本專案尚未實際測試send_email.py功能；若有引用該模組，請於實際應用時進行相應修正。

**二、運行方式：**
1. 後端伺服器主要負責定期（每月）發送申訴憑證、逐日開票申訴結果與對接前端軟體各項功能請求。
2. 前端軟體則作為公司員工進行申訴與仲裁作業的主要操作介面，主選單提供五項功能選擇，分別為：
* 盲化申訴內容
* 取得盲化憑證
* 提出申訴案件
* 驗證委員挑選結果（目前核對過程中存在問題，主要是隨機數和簽章在資料格式轉換上出現了困難，這部分仍需進一步解決。）
* 進行仲裁委員投票
<br>
  <div align="center">
  	<img src="./截圖.png" alt="Editor" width="500">
  </div>
<br>

## 參、建議
本專案的客戶端主要採用命令行介面（CLI）開發，這種方式對於資訊能力較弱的使用者可能會存在一定的操作不便。若未來有進一步的發展機會，將會考慮針對部分功能進行圖形化使用者介面（GUI）的開發，以提升使用者體驗。另一方面，針對追溯惡意投訴者身份的解密功能，本次實作並未提供直接操作。然而，在生成加密身份公私鑰的過程中，已將使用門檻簽章及解密所需資訊一併存入憑證，並保存在MongoDB中。若未來有解密需求，公司可指派專員收集同意解密的同仁私鑰分片，並透過程式中已實作的reconstruct_secret與decrypt函式完成解密操作。
